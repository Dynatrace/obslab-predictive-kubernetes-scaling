{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Dynatrace Observability Lab: Predictive Auto-Scaling for Kubernetes Workloads","text":"<p>View the Code</p> <p>The code for this repository is hosted on GitHub. Click the \"View Code on GitHub\" link above.</p> <p>Struggling to keep up with the demands of dynamic Kubernetes environments? Manual scaling is not only time-consuming and reactive but also prone to errors. In this demo we harness the power of Dynatrace Automations and Davis AI to predict resource bottlenecks and automatically open pull requests to scale applications. This proactive approach minimizes downtime, helps you to optimize resource utilization, and ensures your applications perform at their best.</p> <p>We achieve this by combining predictive AI to forecast resource limitations with generative AI to modify Kubernetes manifests on GitHub by creating pull requests for scaling adjustments. If you'd like a closer look at how this works, you can run the full demo on your own tenant.</p>"},{"location":"#considerations-and-limitations","title":"Considerations and Limitations","text":"<p>While this demo showcases the power of automating Kubernetes scaling, it's important to be aware of a few aspects to ensure smooth integration into your specific environment:</p> <ul> <li>GitOps Deployment Assumptions: For the automatic scaling pull requests to function effectively, the demo makes   some assumptions about your GitOps setup:<ul> <li>The Kubernetes Auto Remediation workflows will only target workloads with these specific annotations. This   behavior could be changed but was introduced to speed up workflow runs and save resources.<ul> <li><code>predictive-kubernetes-scaling.observability-labs.dynatrace.com/enabled: 'true'</code></li> </ul> </li> </ul> </li> <li>GitHub Codespace Usage: If you follow the above instructions, a GitHub Codespace will be created under your   account. While running this demo in a GitHub Codespace is free for most users due to generous usage limits and default   billing settings, we recommend deleting the Codespace after completing the tutorial to avoid potential future charges   if you exceed the free tier. To delete your Codespace, go to https://github.com/codespaces. For more information, see   the GitHub Codespaces documentation.</li> <li>Davis CoPilot API Usage: This demo utilizes Davis CoPilot API calls for its generative AI capabilities. These   calls might cause costs in the future.</li> </ul>"},{"location":"#compatibility","title":"Compatibility","text":"Deployment Tutorial Compatible Dynatrace Managed \u274c Dynatrace SaaS \u2714\ufe0f <ul> <li>Click Here to Begin </li> </ul>"},{"location":"cleanup/","title":"Cleanup","text":"<p>Finished exploring? When you're done with the demo, you can easily clean up all the resources created by this Codespace.</p> <ul> <li>Open a terminal window in your Codespace. </li> <li>Run the cleanup Script by executing <code>./destroy.sh</code>.</li> </ul> <p>This will remove the local Kubernetes cluster, Dynatrace resources, and any other artifacts created during the demo.</p>"},{"location":"getting-started/","title":"Getting Started","text":""},{"location":"getting-started/#requirements","title":"Requirements","text":"<ul> <li>A Grail enabled Dynatrace SaaS Tenant   where Davis CoPilot is enabled (sign up here).</li> <li>A GitHub account to interact with the demo repository.</li> <li>The GitHub for Workflows app installed (via Hub on your Dynatrace environment)<ul> <li>Press <code>ctrl + k</code>. Search for <code>Hub</code>.</li> <li>In the hub, search for <code>Github for Workflows</code> and install the application</li> </ul> </li> </ul>"},{"location":"getting-started/#1-prepare-your-environment","title":"1. Prepare Your Environment","text":"<p>The GitHub Codespace, you will create within this demo, will automatically set up a local Kubernetes cluster and deploy the necessary Dynatrace resources. To make this work, you'll need to provide the below credentials and settings.</p> <ul> <li>A Dynatrace API token to generate other tokens used in this demo. Permissions:<ul> <li><code>apiTokens.read</code></li> <li><code>apiTokens.write</code></li> </ul> </li> <li>A Dynatrace OAuth 2.0 client to deploy the workflows and notebook used in this demo. Permissions:<ul> <li><code>automation:workflows:write</code></li> <li><code>automation:workflows:read</code></li> <li><code>document:documents:write</code></li> <li><code>document:documents:read</code></li> <li><code>document:documents:delete</code></li> <li><code>app-engine:edge-connects:connect</code></li> <li><code>app-engine:edge-connects:write</code></li> <li><code>app-engine:edge-connects:read</code></li> <li><code>app-engine:edge-connects:delete</code></li> <li><code>oauth2:clients:manage</code></li> <li><code>settings:objects:read</code></li> <li><code>settings:objects:write</code></li> </ul> </li> <li>A Dynatrace Platform token to trigger the Davis CoPilot from the demo workflow. Permissions:<ul> <li><code>davis-copilot:conversations:execute</code></li> </ul> </li> <li>Allow an outbound connection from Dynatrace   to <code>api.github.com</code> so that the demo workflow can communicate with GitHub.</li> </ul>"},{"location":"getting-started/#2-create-your-development-environment","title":"2. Create Your Development Environment","text":"<ul> <li>Fork this repository to your GitHub account. This will allow you to make changes and submit pull requests   later on.</li> <li>Adjust the <code>predictive-kubernetes-scaling.observability-labs.dynatrace.com/managed-by-repo</code> annotations in </li> <li><code>apps/horizontal-scaling/deployment.yaml</code> and   <code>apps/vertical-scaling/deployment.yaml</code> to match your forked repository.</li> <li>Create a new Codespace<ul> <li>Go to https://codespaces.new</li> <li>Set the <code>repository</code> to your forked repo</li> <li>Complete the variables requested in the form</li> <li>Click <code>Create Codespace</code></li> </ul> </li> <li>Wait for the Setup to complete. The Codespace will run a <code>postCreate</code> command to initialize your environment. This may   take a few minutes. You'll know it's ready when the <code>zsh</code> shell is shown again.<ul> <li>If you want to check the progress, you can press <code>Ctrl + Shift + P</code> and type <code>Creation Log</code> to see the setup logs   once the Codespace has initialized.</li> </ul> </li> </ul>"},{"location":"getting-started/#3-explore-what-has-been-deployed","title":"3. Explore What Has Been Deployed","text":"<p>Your Codespace has now deployed the following resources:</p> <ul> <li>A local Kubernetes (kind) cluster monitored by Dynatrace, with some pre-deployed apps   that will be used later in the demo.</li> <li>Three Dynatrace workflows:<ul> <li>Predict Kubernetes Resource Usage: This workflow predicts the future resource usage of Kubernetes workloads   using Davis predictive AI. If a workload is likely to exceed its resource quotas, the workflow creates a custom   Davis event with all necessary information.</li> <li>Commit Davis Suggestions: Triggered by the predictive workflow's events, this workflow uses Davis CoPilot and   the GitHub for Workflows app to create pull requests for remediation suggestions.</li> <li>React to Resource Saturation: If the prediction actually misses some resource spikes, this workflow will get   alerted via the automatically created Davis problem and will trigger the prediction workflow to immediately react   and create a pull request. This workflow is disabled by default to avoid unwanted triggers of the prediction   workflow.</li> </ul> </li> <li>A Dynatrace notebook that provides a more in-depth overview of how   the deployed workflows work.</li> <li>A Dynatrace dashboard that shows a summary of all predictions and    their accuracy.</li> </ul>"},{"location":"getting-started/#4-grab-a-coffee","title":"4. Grab a Coffee","text":"<p>Before moving on, Davis AI needs around 20 minutes to analyze your Kubernetes workloads and establish a baseline for predictive analysis. You can check its progress by navigating to the newly deployed \"Predictive Kubernetes Scaling\" notebook and running the DQL query in the \"2. Predict Resource Usage\" step. If the results indicate that Davis AI is ready, you can proceed to step 5.</p> <p>Just make sure that your Codespace does not expire within that time by e.g. clicking into the window from time to time. Check out the GitHub Codespace documentation to read more about timeout periods for Codespaces and how to configure them.</p>"},{"location":"getting-started/#5-generate-some-load","title":"5. Generate Some Load","text":"<p>Info</p> <p>Before proceeding, ensure Davis AI has finished creating a baseline for your workloads (see step 4 for more information).</p> <p>Now, let's simulate a scenario where workload increases and triggers a resource prediction:</p> <ul> <li>Go to your Codespace and open the terminal window.</li> <li>Run <code>./generate-load.sh</code> to put some load on the deployed demo app. You can choose between two options here:<ul> <li><code>horizontal-scaling</code>: Generates load on a deployment that is scaled by a <code>HorizontalPodAutoscaler</code> (HPA). In that   case, the max replicas of the HPA will be adjusted by the workflow.</li> <li><code>vertical-scaling</code>: Generates load on a standard deployment that is not scaled by any other resource. In that   case,   the resource quotas of the deployment will be adjusted by the workflow.</li> </ul> </li> <li>Wait a few minutes again as it will take a bit for the Davis resource prediction to actually exceed the defined   quotas. You can track progress in the \"Predictive Kubernetes Scaling\" notebook again. Usually, the CPU will spike   first and memory will stay stable most of the time.</li> </ul>"},{"location":"getting-started/#6-watch-the-magic-happen","title":"6. Watch the Magic Happen","text":"<p>By now, the deployed Dynatrace workflows should have sprung into action, and you should find an auto-remediation pull request in your forked repository. Let's explore what happened behind the scenes:</p> <ul> <li>Navigate to Workflows:  Press <code>Ctrl + K</code> (or <code>Cmd + K</code> on Mac) and type \"Workflows\" to open the Dynatrace Workflows   app.</li> <li>Check the \"Predict Kubernetes Resource Usage\" Workflow:<ul> <li>Find the \"Predict Kubernetes Resource Usage\" workflow in the list and click on it.</li> <li>Click on <code>Run</code> in the top right of the toolbar to trigger the workflow.</li> <li>Wait for the execution to see details of each step. The final step should be emitting a <code>CUSTOM_INFO</code> Davis event,   which triggers the next workflow.</li> </ul> </li> <li>Check the \"Commit Davis Prediction\" Workflow:<ul> <li>Navigate back to the workflows home page.</li> <li>Find the \"Commit Davis Prediction\" workflow, click the three dots in the top right and select   <code>View execution history</code>.</li> <li>Examine each step to understand how the workflow applied Davis CoPilot's suggestions.</li> </ul> </li> <li>Review the Pull Request:<ul> <li>Go to your forked repository on GitHub.</li> <li>You should see an open pull request with the changes made by the workflow.</li> </ul> </li> </ul>"},{"location":"getting-started/#7-troubleshooting","title":"7. Troubleshooting","text":"<p>If any steps failed:</p> <ul> <li>Consult the Notebook: The \"Predictive Kubernetes Scaling\" notebook can provide valuable insights into potential   issues.</li> <li>Raise an Issue: Feel free to raise an issue in this repository for assistance.</li> </ul> <ul> <li>Click Here to Continue </li> </ul>"},{"location":"resources/","title":"Resources","text":"<p>Eager to explore further? Dive into the inner workings of this demo with these resources:</p> <ul> <li>Observability Lab on YouTube: See this demo in action and gain valuable insights directly from a Dynatrace   AI expert.</li> <li>Demo Notebook: Walk through this demo's steps using sample data on the Dynatrace Playground tenant.</li> <li>Step-by-Step Tutorial: Learn to create and customize these powerful workflows yourself.</li> </ul>"},{"location":"whats-next/","title":"What's Next?","text":"<p>This demo is a great starting point, but it's really just the beginning. You can adapt and expand this proof of concept to meet your specific needs. Here are some ideas to get you started:</p> <ul> <li>Scheduled Predictions: Instead of running the prediction workflow manually, set up a timer trigger to run it   periodically. Adjust the analyzed time period to match your environment.</li> <li>Cluster Autoscaling: Explore how you can use this approach   for Kubernetes cluster autoscaling.</li> <li>Adjust to your environment: This demo is just a starting point. You can adjust the annotations, default values,    thresholds and time periods to match your environment.</li> <li>Get Creative: There are endless possibilities! Share your innovative solutions with us.</li> </ul>"},{"location":"whats-next/#share-your-feedback","title":"Share Your Feedback","text":"<p>We value your input! If you encounter any problems, have suggestions, or just want to share your thoughts, please don't hesitate to raise an issue in this repository.</p>"},{"location":"snippets/disclaimer/","title":"Disclaimer","text":"<p>Support Policy</p> <p>This is a demo project created by the Developer Relations team at Dynatrace, showcasing integrations with open source technologies.</p> <p>Support is provided via GitHub issues only. The materials provided in this repository are offered \"as-is\" without any warranties, express or implied. Use them at your own risk.</p>"},{"location":"snippets/view-code/","title":"View code","text":"<p>View the Code</p> <p>The code for this repository is hosted on GitHub. Click the \"View Code on GitHub\" link above.</p>"}]}